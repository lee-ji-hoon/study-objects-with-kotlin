# 11장 합성과 유연한 설계

상속은 구현에 의존하는 반면, 합성은 인터페이스에 의존

변경에 더욱 안정적인 코드를 얻을 수 있음

상속은 코드 자체를 재사용하지만, 합성은 인터페이스를 재사용

클래스 사이의 높은 결합도를 객체 사이의 낮은 결합도로 대체 가능

### 상속을 합성으로 변경하기

합성을 이용해 상속이 초래하는 세 가지 문제점을 해결할 수 있음

- 불필요한 인터페이스 상속
    - 인스턴스 변수로 상위 클래스를 가지고 있기 때문에 상위 클래스의 불필요한 인터페이스를 사용할 수 없음
- 메서드 오버라이딩의 오작용
    - 포워딩을 사용하여 구현 (솔직히 이건 좀)
- 부모 클래스와 자식 클래스의 동시 수정
    - 직접적인 문제 해결은 되지 않지만, 파급효과를 자식 클래스 내부로 캡슐화할 수 있기 때문에 합성이 더욱 좋음

### 클래스 폭발

부모 클래스의 super 호출을 사용하지 않기 위해 추상 메서드를 활용

그냥 추가하면 모든 자식 클래스가 같은 메서드를 구현해야 하므로 훅 메서드를 이용하여 코드를 작성함

클래스 폭발 : 기능 추가를 위해 많은 수의 클래스가 추가되는 경우

### 합성으로 변경하기

상속은 컴파일타임에 결정되기 때문에 클래스 폭발 문제가 발생함

합성은 인터페이스에 의존하기 때문에 런타임 의존성으로 관리 가능

### 믹스인

객체를 생성할 때 코드 일부를 클래스 안에 섞어 넣어 재사용하는 기법

- 컴파일 시점에 필요한 코드 조각을 조합할 수 있음

- 상속같아 보일 수 있지만 상속과는 완전히 다름 / 합성에 더욱 가까운 매커니즘