# 다형성

## 다형성
- 유니버셜 다형성
  - 매개변수 Parametric
  - 포함 Inclustion
- 임시 다형성
  - 오버로딩 Overloading
  - 강제 Coercion

### Overloading
- 하나의 클래스 안에 동일한 이름의 메서드가 존재하는 경우

### Coercion
- 자동 타입 변환 / 사용자가 구현한 타입 변환을 통해 동일한 연산자를 다양한 타입에 사용할 수 있는 경우
- ex) + 연산자로 실수 덧셈과 문자열 연결

### Parametric
- Generic과 관련
- 타입을 임의로 선언한 후 사용하는 시점에 구체적인 타입으로 지정
- ex) List<T>

### Inclustion
- 메세지가 동일 but 수신 객체 타입에 따라 행동이 달라짐
- 상속을 통한 서브타입 다형성

## 상속의 양면성

- 상속의 목적
  - 코드 재사용 X
  - 타입 계층 구축 O

## 업캐스팅과 동적 바인딩

- 업캐스팅
  - 부모 클래스 타입으로 선언된 변수에 자식 클래스의 인스턴스를 할당하는 것이 가능
  - 자식 클래스에 부모 클래스의 퍼블릭 인터페이스가 합쳐지니까.
  - 다운캐스팅: 부모를 자식 클래스 타입으로 변환하는 명시적 타입 캐스팅
- 동적 바인딩
  - 선언된 변수의 타입이 아니라 메시지를 수신하는 객체의 타입에 따라 실행되는 메서드가 결정
  - = 지연 바인딩
  - 정적 바인딩
    - 컴파일타임에 호출된 함수를 결정하는 방식

## 동적 메서드 탐색과 다형성

### 객체지향 시스템이 실행할 메서드를 선택하는 방식
1. 메세지를 수신한 객체: 자신을 생성한 클래스에 적합한 메서드가 존재하는지 검사한다.
   1-1. 존재하면 메서드를 실행하고 탐색을 종료
    1-2. 존재하지 않으면 부모 클래스에서 메서드 탐색
2. 적합한 메서드를 찾을 때까지 상속 계층을 따라가며 계속
3. 상속 계층의 가장 최상위에 이르러도 못 찾으면 Exception 발생

-> 자식 클래스에 선언된 메서드가 부모 클래스의 메서드보다 높은 우선순위

### self reference
  - 객체가 메세지를 수신하면 self 참조라는 임시 변수를 자동으로 생성
  - 메세지를 수신한 객체를 가리키도록 설정
  - 메서드 탐색이 종료되는 순간 자동으로 소멸

-> 실행 시점에 self 참조를 이용해서 메서드 탐색 경로 찾음

=> 상속 계층 정의 = 메서드 탐색 경로 지정

- self 참조가 가리키는 객체의 타입을 변경함으로써 객체가 실행될 문맥을 동적으로 변경
  - self 전송
  - 메세지 탐색을 self 참조가 가리키는 클래스부터 다시 시작
  - A > B > C 상속 관계에서 self가 B라면 B부터 탐색
  - self 전송이 깊은 상속 계층 & 메서드 오버라이딩 함정 -> 혼파망코드 탄생

### super reference
- 부모 클래스의 인스턴스 변수와 메서드에 접근하기 위해 사용하는 내부 변수
- = 이 클래스으 부모 클래스부터 메서드 탐색을 시작하라.
- 바로 위 조상만 해당되는 것이 아님. 조상 중에 있기만 하면 됨



